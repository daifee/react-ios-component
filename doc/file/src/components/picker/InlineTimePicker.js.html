<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/components/picker/InlineTimePicker.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/actionsheet</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ActionSheet">ActionSheet</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/alert</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/alert/Prompt.js~Prompt.html">Prompt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Alert">Alert</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AlertBody">AlertBody</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AlertButton">AlertButton</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AlertFooter">AlertFooter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AlertHeader">AlertHeader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Confirm">Confirm</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/badge</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Badge">Badge</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/button</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Button">Button</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/cell</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Cell">Cell</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellBody">CellBody</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellBody">CellBody</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellFooter">CellFooter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellHeader">CellHeader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Cells">Cells</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellsTitle">CellsTitle</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/form</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/form/Slider.js~Slider.html">Slider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Checkbox">Checkbox</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Input">Input</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Radio">Radio</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Stepper">Stepper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Switch">Switch</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Textarea">Textarea</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/icon</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Icon">Icon</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-IconLoading">IconLoading</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/indicator</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/indicator/Indicator.js~Indicator.html">Indicator</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/mask</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Mask">Mask</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/navbar</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-NavBar">NavBar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-NavBarItem">NavBarItem</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/page</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Page">Page</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Scene">Scene</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/picker</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/picker/DatePicker.js~DatePicker.html">DatePicker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/picker/InlineDatePicker.js~InlineDatePicker.html">InlineDatePicker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/picker/InlinePicker.js~InlinePicker.html">InlinePicker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/picker/InlineTimePicker.js~InlineTimePicker.html">InlineTimePicker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/picker/Options.js~Options.html">Options</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/picker/Picker.js~Picker.html">Picker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/picker/TimePicker.js~TimePicker.html">TimePicker</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/popup</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Popup">Popup</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/portal</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/portal/Portal.js~Portal.html">Portal</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/searchbar</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/searchbar/SearchBarInput.js~SearchBarInput.html">SearchBarInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-SearchBar">SearchBar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-SearchBarFooter">SearchBarFooter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-SearchBarHeader">SearchBarHeader</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/segmented</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Segmented">Segmented</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/tabbar</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TabBar">TabBar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TabBarIcon">TabBarIcon</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TabBarItem">TabBarItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TabBarLabel">TabBarLabel</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/util</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createPortalEl">createPortalEl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getContainer">getContainer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createClassNames">createClassNames</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-date2str">date2str</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-generateOptions">generateOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-indexOfOptions">indexOfOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-px2rem">px2rem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-config">config</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-classNames">classNames</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/components/picker/InlineTimePicker.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * @author haw
 */

import React, {
	PropTypes,
	Component
} from &apos;react&apos;;
import Options from &apos;./Options&apos;;
import {
	classNames,
	generateOptions,
	indexOfOptions
} from &apos;../util&apos;;

const prefix = &apos;picker-body&apos;;

/**
 * &#x5167;&#x8054;&#x65F6;&#x95F4;&#x9009;&#x62E9;&#x5668;
 */
export default class InlineTimePicker extends Component {

	/**
	 * &#x6784;&#x9020;&#x51FD;&#x6570;
	 * @param {Object} props &#x7EC4;&#x4EF6;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x5C5E;&#x6027;
	 * @param {string} [props.selectedTime] &#x5F53;&#x524D;&#x9009;&#x4E2D;&#x7684;&#x65E5;&#x671F;
	 * @param {string} [props.minDate=&apos;00:00:00&apos;] &#x6700;&#x5C0F;&#x53EF;&#x9009;&#x62E9;&#x7684;&#x65E5;&#x671F;
	 * @param {string} [props.maxDate=&apos;23:59:59&apos;] &#x6700;&#x5927;&#x53EF;&#x9009;&#x62E9;&#x7684;&#x65E5;&#x671F;
	 * @param {string} [props.hourUnit=&apos;&apos;] &#x5C0F;&#x65F6;&#x7684;&#x5355;&#x4F4D;&#x6587;&#x6848;
	 * @param {string} [props.minuteUnit=&apos;&apos;] &#x5206;&#x949F;&#x7684;&#x5355;&#x4F4D;&#x6587;&#x6848;
	 * @param {string} [props.secondUnit=&apos;&apos;] &#x79D2;&#x7684;&#x5355;&#x4F4D;&#x6587;&#x6848;
	 * @param {function} props.onChange &#x9009;&#x4E2D;&#x67D0;&#x4E00;&#x4E2A;&#x9879;&#x65F6;&#x89E6;&#x53D1;&#x7684;&#x51FD;&#x6570;&#x56DE;&#x8C03;
	 * @param {Object} context
	 */
	constructor(props, context) {
		super(props, context);
	}

	_setHours = (hourOptions, selectedIndex) =&gt; {
		const value = hourOptions[selectedIndex].value;

		this.onChange(value, &apos;hours&apos;);
	};

	_setMinutes = (minuteOptions, selectedIndex) =&gt; {
		const value = minuteOptions[selectedIndex].value;

		this.onChange(value, &apos;minutes&apos;);
	};

	_setSeconds = (secondOptions, selectedIndex) =&gt; {
		const value = secondOptions[selectedIndex].value;

		this.onChange(value, &apos;seconds&apos;);
	};

	onChange(value, key) {
		const {
			onChange,
			selectedTime
		} = this.props;
		let time = parseTime(selectedTime);
		time[key] = value;
		const newTime = formatTime(time);

		onChange &amp;&amp; onChange(newTime);
	}

	render() {
		let {
			selectedTime,
			maxTime,
			minTime,
			hourUnit,
			minuteUnit,
			secondUnit,
			className,
			...rest
		} = this.props;
		const clazz = classNames(prefix, {
			[className]: className
		});
		const selectedTimeObj = parseTime(selectedTime);
		const maxTimeObj = parseTime(maxTime);
		const minTimeObj = parseTime(minTime);
		const hourOptions = createHourOptions(maxTimeObj, minTimeObj, hourUnit);
		const minuteOptions = createMinuteOptions(maxTimeObj, minTimeObj, 
			selectedTimeObj, hourUnit);
		const secondOptions = createSecondOptions(maxTimeObj, minTimeObj, 
			selectedTimeObj, hourUnit);
		const hoursIndex = indexOfOptions(selectedTimeObj.hours, hourOptions);
		const minutesIndex = indexOfOptions(selectedTimeObj.minutes, minuteOptions);
		const secondsIndex = indexOfOptions(selectedTimeObj.seconds, secondOptions);

		return (
			&lt;div className={clazz} {...rest}&gt;
				&lt;Options 
					selectedIndex={hoursIndex}
					options={hourOptions} 
					key={&apos;hours&apos;} 
					onChange={this._setHours.bind(this, hourOptions)}
				/&gt;
				&lt;Options 
					selectedIndex={minutesIndex}
					options={minuteOptions} 
					key={&apos;minutes&apos;} 
					onChange={this._setMinutes.bind(this, minuteOptions)}
				/&gt;
				&lt;Options 
					selectedIndex={secondsIndex}
					options={secondOptions} 
					key={&apos;seconds&apos;} 
					onChange={this._setSeconds.bind(this, secondOptions)}
				/&gt;
			&lt;/div&gt;
		);
	}
}

function formatTime(timeObj) {
	let hours = add0(timeObj.hours);
	let minutes = add0(timeObj.minutes);
	let seconds = add0(timeObj.seconds);
	
	return `${hours}:${minutes}:${seconds}`;
}

function add0(value) {
	return value &lt; 10 ? `0${value}` : value;
}

function createHourOptions(maxTimeObj, minTimeObj, hourUnit) {
	return generateOptions(maxTimeObj.hours, minTimeObj.hours, hourUnit);
}

function createMinuteOptions(maxTimeObj, minTimeObj, selectedTimeObj, minuteUnit) {
	const max = isEqualHour(maxTimeObj, selectedTimeObj) ? maxTimeObj.minutes : 59;
	const min = isEqualHour(minTimeObj, selectedTimeObj) ? minTimeObj.minutes : 0;

	return generateOptions(max, min, minuteUnit);
}

function createSecondOptions(maxTimeObj, minTimeObj, selectedTimeObj, secondUnit) {
	const max = isEqualHourMinute(maxTimeObj, selectedTimeObj) ? maxTimeObj.minutes : 59;
	const min = isEqualHourMinute(minTimeObj, selectedTimeObj) ? minTimeObj.minutes : 0;

	return generateOptions(max, min, secondUnit);
}

function isEqualHour(t1, t2) {
	return t1.hours === t2.hours;
}

function isEqualHourMinute(t1, t2) {
	return isEqualHour(t1, t2) &amp;&amp; t1.minutes === t2.minutes;
}

function parseTime(time) {
	const times = time.split(&apos;:&apos;);

	return {
		hours: parseInt(times[0]),
		minutes: parseInt(times[1]),
		seconds: parseInt(times[2])
	};
}

InlineTimePicker.propTypes = {
	selectedTime: PropTypes.string.isRequired,
	minTime: PropTypes.string,
	maxTime: PropTypes.string,
	hourUnit: PropTypes.string,
	minuteUnit: PropTypes.string,
	secondUnit: PropTypes.string,
	onChange: PropTypes.func
};

InlineTimePicker.defaultProps = {
	minTime: &apos;00:00:00&apos;,
	maxTime: &apos;23:59:59&apos;,
	hourUnit: &apos;&apos;,
	minuteUnit: &apos;&apos;,
	secondUnit: &apos;&apos;
};</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.7)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
